-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
-- skid skid skid skid skid skid skid
local lp = game.Players.LocalPlayer
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
local Window = Rayfield:CreateWindow({
   Name = "Cathub Teleporter",
   Icon = 121284264304750,
   LoadingTitle = "cats",
   LoadingSubtitle = "meow",
   ShowText = "",
   Theme = "Ocean",
   ToggleUIKeybind = "P",
   DisableRayfieldPrompts = true,
   DisableBuildWarnings = true,
   ConfigurationSaving = {
      Enabled = true,
      FolderName = "PositionsCATHUB",
      FileName = "CathubTP"
   },
})
--=================VARIABLES========================--
local targetPos = nil
local tpMode = "Tween"
local tweenSpeed = 50

--=================VARIABLES========================--
local infotab = Window:CreateTab("Info", 0)
local FirstGraph = infotab:CreateParagraph({
   Title = "Welcome!",
   Content = "This script is complicated to use. If you don't know how to use, please don't use this."
})

local tptab = Window:CreateTab("Teleport", 0)
-- tp button
local teleport = tptab:CreateButton({
   Name = "Teleport",
   Callback = function()
      if not targetPos then return end
      local char = lp.Character
      if not (char and char:FindFirstChild("HumanoidRootPart")) then return end
      local hrp = char.HumanoidRootPart
      if tpMode == "CFrame" then
         hrp.CFrame = CFrame.new(targetPos)
      elseif tpMode == "Tween" then
         local TweenService = game:GetService("TweenService")
         local tinfo = TweenInfo.new((hrp.Position - targetPos).Magnitude/tweenSpeed, Enum.EasingStyle.Linear)
         local tween = TweenService:Create(hrp, tinfo, {CFrame = CFrame.new(targetPos)})
         tween:Play()
      elseif tpMode == "Pathfind" then
         local PathfindingService = game:GetService("PathfindingService")
         local humanoid = char:FindFirstChildOfClass("Humanoid")
         if humanoid then
            local path = PathfindingService:CreatePath()
            path:ComputeAsync(hrp.Position, targetPos)
            for _, waypoint in pairs(path:GetWaypoints()) do
               humanoid:MoveTo(waypoint.Position)
               humanoid.MoveToFinished:Wait()
            end
         end
      end
   end,
})
-- current pos label
local currentpos = tptab:CreateLabel("Current pos: ")
-- pos changer
local pospicker = tptab:CreateInput({
   Name = "Position",
   CurrentValue = "",
   PlaceholderText = "X, Y, Z",
   RemoveTextAfterFocusLost = false,
   Flag = "select_position",
   Callback = function(Text)
      local x,y,z = string.match(Text,"([^,]+),%s*([^,]+),%s*([^,]+)")
      if x and y and z then
         targetPos = Vector3.new(tonumber(x),tonumber(y),tonumber(z))
      else
         targetPos = nil
      end
   end,
})
-- get pos button
local getpos = tptab:CreateButton({
   Name = "Get Pos",
   Callback = function()
      if lp.Character and lp.Character:FindFirstChild("HumanoidRootPart") then
         local posxd = lp.Character.HumanoidRootPart.Position
         currentpos:Set("Current pos: "..math.floor(posxd.X)..", "..math.floor(posxd.Y)..", "..math.floor(posxd.Z))
      end
   end,
})

local setstab = Window:CreateTab("Settings", 0)
local changetpmode = setstab:CreateDropdown({
   Name = "Teleport Mode",
   Options = {"CFrame","Tween", "Pathfind"},
   CurrentOption = {"Tween"},
   MultipleOptions = false,
   Flag = "change_tp_mode",
   Callback = function(Options)
      tpMode = Options[1]
   end,
})

local tweenspeedslider = setstab:CreateSlider({
   Name = "Tween Speed",
   Range = {1, 100},
   Increment = 1,
   CurrentValue = tweenSpeed,
   Flag = "tween_speed",
   Callback = function(Value)
      tweenSpeed = Value
   end,
})
